<!DOCTYPE html>
<html lang="en" :URLPATH="/">
  <head :title="Trillo Docs" :page_headerBg="#fff">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Isomorphic reactive web framework and server for Node.js and the browser">
    <meta name="keywords" content="node node.js reactive isomorhpic web framework frontend">
    <meta name="theme-color" content="[[page_headerBg]]"/>
    <meta name="color-scheme" content="light dark">
    <title>[[title]]</title>
    <link rel="icon" href="/favicon.svg">
    <link rel="apple-touch-icon" href="/assets/trillo-semi.png"/>
    <!--- https://getbootstrap.com/docs/5.3/getting-started/introduction/ -->
    <link href="/res/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
    <!--- https://icons.getbootstrap.com -->
    <!--- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"> -->
    <!--- https://icons8.com/line-awesome -->
    <!--- <link href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css" rel="stylesheet"> -->
    <:import src="../parts/page.htm"/>
    <:import src="../parts/navbar.htm"/>
    <:import src="../parts/footer.htm"/>
    <:import src="../parts/dark.htm"/>
    <:import src="parts/highlight-js.htm"/>
    <:import src="parts/marked-js.htm"/>
    <:import src="parts/docs.htm"/>
  </head>
  <body :pathname="[[head.router.pathname.substring(PAGEPATH.length)]]"
        :docurl="[[pathname !== 'index' ? pathname : 'quick-start']]">
    <:data-source :aka="docsData"
                  :url="/docs-data"
                  :getTitle="[[(url) => {
                    let ret = '';
                    const f = (dd) => {
                      for (let d of dd) {
                        if (d.children) {
                          f(d.children);
                        } else if (d.url === url) {
                          ret = d.key;
                        }
                      }
                    }
                    f(content.docs);
                    return ret;
                  }]]"
                  :getValue="[[(url) => {
                    let ret = '';
                    const f = (dd) => {
                      for (let d of dd) {
                        if (d.children) {
                          f(d.children);
                        } else if (d.url === url) {
                          ret = d.val;
                        }
                      }
                    }
                    f(content.docs);
                    return ret;
                  }]]"/>

    <app-navbar :container="container-lg" data-bs-theme="light">
      <li :slot="left" class="nav-item">
        <a class="nav-link active" aria-current="page" href="/">
          [[head.title + (main.title ? ' - ' + main.title : '')]]
        </a>
      </li>
      <form :slot="right" class="d-flex" role="search">
        <input class="form-control me-2"
               type="search"
               placeholder="Search"
               aria-label="Search">
      </form>
    </app-navbar>

    <div :aka="main"
         class="container-lg docs"
         :data="[[docsData.content]]"
         :title="[[docsData.getTitle(docurl)]]">
      <div class="row">

        <div class="col-3 sidebar">
          <div>
            <ul class="menu-list">
              <li :class-menu-item="[[true]]"
                  :class-selected="[[data.url === docurl]]"
                  :data="[[data.docs]]"
                  :nestFor="[[data.children]]"
                  :nestIn=".menu-list"
                  :class-has-children="[[!!data.children]]">
                <a class="menu-link" href="[[PAGEPATH + data.url]]">[[data.key]]</a>
                <ul class="menu-list"/>
              </li>
            </ul>
          </div>
        </div>

        <div class="col main">
          <marked-js :source="[[docsData.getValue(docurl)]]"/>
        </div>

      </div>
    </div>

    <app-footer>
      &copy; [[new Date().getYear() + 1900]] trillojs.dev
      <a href="https://github.com/trillojs/trillo/blob/main/LICENSE" target="Github" style="float: right">MIT Licence</a>
    </app-footer>
    <script src="/res/bootstrap-5.3.1/bootstrap.bundle.min.js"></script>
  </body>
</html>
